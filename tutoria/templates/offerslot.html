{% extends 'nav.html' %}

<!-- title -->
{% block title %} Change Offering Slots - Tutoria {% endblock %}

{% block stylesheet %}
    <link href="/static/css/schedule.css" rel="stylesheet"> 
{% endblock %}

<!-- menu -->
{% block menu %} 
    {% if user.is_authenticated %}
        <div class="bd-toc-item">
            <a class="bd-toc-link" href="{% url 'home' %}">
                Overview
            </a>
        </div>
        <div class="bd-toc-item">
            <a class="bd-toc-link" href="{% url 'session' %}">
                My Tutorials
            </a>
        </div>

        <div class="bd-toc-item">
            <a class="bd-toc-link" href="{% url 'search' %}">
                Search Tutor
            </a>
        </div>

        {% if user.profile.identity != 'S' %}
            <div class="bd-toc-item active">
                <a class="bd-toc-link" href="{% url 'offerslot' %}">
                    Set Timeslots
                </a>
            </div>
        {% endif %} 

        <div class="bd-toc-item">
            <a class="bd-toc-link" href="{% url 'wallet' %}">
                My Wallet
            </a>
        </div>
        
    {% endif %} 
{% endblock %}

<!-- main -->
{% block content %}
  <h1 class="bd-title">Change Offering Slots</h1>

  <form method="post">
    {% csrf_token %}
    <table class="table table-hover table-sm" id="offerslots">
        <thead>
            <tr>
                <th></th>
                {% for slots in timeslots %}
                    <th>{{slots}}</th>
                {% endfor %}
            </tr>
        </thead>

        <tbody>
            {% for field in form %}
                {% ifchanged field.field.widget.attrs.date %}
                    {% if forloop.counter0 != 0 %}
                    </tr>
                    {% endif %}
                    <tr>
                    <th>
                        {{ field.field.widget.attrs.date }}
                    </th>
                    {% endifchanged %}
                    <td class="
                        {% if field.field.widget.attrs.status == 'Available' %} available
                        {% elif field.field.widget.attrs.status == 'Blocked' %} blocked
                        {% elif field.field.widget.attrs.status == 'Unavailable' %} unavailable
                        {% elif field.field.widget.attrs.status == 'Booked' %} unavailable
                        {% elif field.field.widget.attrs.status == 'Committed' %} unavailable
                        {% endif %}
                    ">
                        {{ field }}
                    </td>
            {% endfor %}
            </tr>
        </tbody>
    </table>

    <button type="submit">submit</button>
  </form>

{% endblock %}